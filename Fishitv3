-- Fish It! Hub GUI v2.3.6 - November 2025 Update
-- Compatible with Delta Executor
-- Game: Fish It! on Roblox

--// UI Library (Kavo)
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("FFS Hub [Free] - v2.3.6", "DarkTheme")

--// Services
local Players            = game:GetService("Players")
local ReplicatedStorage  = game:GetService("ReplicatedStorage")
local VirtualInputManager= game:GetService("VirtualInputManager")
local RunService         = game:GetService("RunService")
local TweenService       = game:GetService("TweenService")
local UserInputService   = game:GetService("UserInputService")
local CoreGui            = game:GetService("CoreGui")

local LocalPlayer        = Players.LocalPlayer
local Character          = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid           = Character:WaitForChild("Humanoid")
local HumanoidRootPart   = Character:WaitForChild("HumanoidRootPart")

--// DRAGGABLE + MINIMIZE SUPPORT UNTUK KAVO UI
local function MakeDraggable(frame: Frame)
    local dragging = false
    local dragInput, dragStart, startPos

    local function update(input)
        local delta = input.Position - dragStart
        frame.Position = UDim2.new(
            startPos.X.Scale,
            startPos.X.Offset + delta.X,
            startPos.Y.Scale,
            startPos.Y.Offset + delta.Y
        )
    end

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1
        or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement
        or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if dragging and input == dragInput then
            update(input)
        end
    end)
end

-- Cari frame utama Kavo UI dan jadikan draggable
task.spawn(function()
    task.wait(1) -- kasih waktu library spawn dulu

    local gui = CoreGui:FindFirstChild("KavoUI")
        or CoreGui:FindFirstChild("KavoUI v2")
        or CoreGui:FindFirstChildWhichIsA("ScreenGui")

    if gui then
        local mainFrame

        -- coba cari Frame bernama "Main" dulu
        for _, v in ipairs(gui:GetDescendants()) do
            if v:IsA("Frame") and v.Name == "Main" then
                mainFrame = v
                break
            end
        end

        -- fallback: ambil frame pertama
        if not mainFrame then
            mainFrame = gui:FindFirstChildWhichIsA("Frame")
        end

        if mainFrame then
            MakeDraggable(mainFrame)
        end
    end
end)

--// Variables
local SavedLocation        = nil
local AutoFishEnabled      = false
local AutoFixStuckEnabled  = false
local AutoEventEnabled     = false
local IdleTime             = 0
local LastPosition         = HumanoidRootPart.Position
local FishingRod           = nil
local CompleteDelay        = 0.685
local CancelDelay          = 1.04
local MaxIdleTime          = 15
local AutoRespawnEnabled   = false

--------------------------------------------------
-- ========== MAIN TAB ==========
--------------------------------------------------
local MainTab            = Window:NewTab("Main")
local LocalPlayerSection = MainTab:NewSection("Local Player")

LocalPlayerSection:NewToggle("Hide Name Tag", "Hide name tag of local player", function(state)
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Head") then
        for _, v in pairs(LocalPlayer.Character.Head:GetChildren()) do
            if v:IsA("BillboardGui") then
                v.Enabled = not state
            end
        end
    end
end)

LocalPlayerSection:NewToggle("Hide Caught Fish Notification", "Hide Fish Notification", function(state)
    _G.HideFishNotification = state
    local playerGui = LocalPlayer:WaitForChild("PlayerGui")
    for _, gui in pairs(playerGui:GetChildren()) do
        if gui.Name:lower():find("notification") or gui.Name:lower():find("fish") then
            gui.Enabled = not state
        end
    end
end)

LocalPlayerSection:NewToggle("Hide Text Fish Notification", "Hide Text Fish Notification", function(state)
    _G.HideTextFishNotification = state
end)

LocalPlayerSection:NewToggle("Disable Cutscene", "Hide Cutscene Fish Caught", function(state)
    _G.DisableCutscene = state
    local playerGui = LocalPlayer:WaitForChild("PlayerGui")
    for _, gui in pairs(playerGui:GetChildren()) do
        if gui.Name:lower():find("cutscene") then
            gui.Enabled = not state
        end
    end
end)

-- Location Saver Section
local LocationSection = MainTab:NewSection("Location Saver")

LocationSection:NewButton("Save Location", "Save current location", function()
    if HumanoidRootPart then
        SavedLocation = HumanoidRootPart.CFrame
        Library:Notify("Success", "Location saved!", 3)
    end
end)

LocationSection:NewButton("Reset Saved Location", "Reset saved location", function()
    SavedLocation = nil
    Library:Notify("Success", "Location reset!", 3)
end)

LocationSection:NewButton("Teleport to Saved Location", "Teleport to saved location", function()
    if SavedLocation and HumanoidRootPart then
        HumanoidRootPart.CFrame = SavedLocation
        Library:Notify("Success", "Teleported to saved location!", 3)
    else
        Library:Notify("Error", "No location saved!", 3)
    end
end)

-- Teleport Section - Updated November 2025
local TeleportSection = MainTab:NewSection("Teleport")

-- All Fish It! Maps - November 2025 Update
local islands = {
    "Fisherman Island (Spawn)",
    "Kohana Island",
    "Kohana Volcano",
    "Coral Reef Island",
    "Tropical Grove Island",
    "Crater Island",
    "Lost Isle",
    "Ancient Jungle Island",
    "Esoteric Depths",
    "Classic Island (NEW)",
    "Iron Cavern (NEW)",
    "Iron Cafe (NEW)"
}

-- Updated coordinates for all locations in Fish It! (November 2025)
local islandPositions = {
    ["Fisherman Island (Spawn)"] = CFrame.new(0, 135, 0),
    ["Kohana Island"]           = CFrame.new(1800, 140, -1200),
    ["Kohana Volcano"]          = CFrame.new(1850, 180, -1100),
    ["Coral Reef Island"]       = CFrame.new(-2100, 130, 1800),
    ["Tropical Grove Island"]   = CFrame.new(2500, 138, 2100),
    ["Crater Island"]           = CFrame.new(-3200, 145, -1500),
    ["Lost Isle"]               = CFrame.new(-4100, 125, 2800),
    ["Ancient Jungle Island"]   = CFrame.new(3800, 142, -2600),
    ["Esoteric Depths"]         = CFrame.new(-1650, -180, -850),

    ["Classic Island (NEW)"]    = CFrame.new(1200, 138, 3500),
    ["Iron Cavern (NEW)"]       = CFrame.new(1250, 95, 3480),
    ["Iron Cafe (NEW)"]         = CFrame.new(1230, 85, 3460)
}

TeleportSection:NewDropdown("Teleport Island", "Select island to teleport", islands, function(selected)
    if islandPositions[selected] and HumanoidRootPart then
        HumanoidRootPart.CFrame = islandPositions[selected]
        task.wait(0.1)
        Library:Notify("Teleported", "Teleported to " .. selected, 3)
    end
end)

TeleportSection:NewButton("Teleport to Ocean", "Teleport to open ocean", function()
    HumanoidRootPart.CFrame = CFrame.new(500, 130, 500)
    Library:Notify("Teleported", "Teleported to Ocean!", 3)
end)

-- Teleport to Players
local playersList = {}
local function updatePlayersList()
    playersList = {}
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer then
            table.insert(playersList, player.Name)
        end
    end
    return playersList
end

TeleportSection:NewButton("Teleport Players", "Open player teleport menu", function()
    updatePlayersList()
    Library:Notify("Players", "Total players: " .. #playersList, 3)
end)

TeleportSection:NewButton("Refresh Players", "Refresh players list", function()
    updatePlayersList()
    Library:Notify("Success", "Players list refreshed! Total: " .. #playersList, 3)
end)

--------------------------------------------------
-- ========== AUTO FISHING TAB ==========
--------------------------------------------------
local AutoFishTab     = Window:NewTab("Auto Fishing")
local AutoFishSection = AutoFishTab:NewSection("Auto Fishing")

local fishingModes = {"Blatant New", "Legit", "Fast"}
local selectedMode = "Blatant New"

AutoFishSection:NewDropdown("Auto Fishing Mode", "Select fishing mode", fishingModes, function(mode)
    selectedMode = mode
    Library:Notify("Mode Changed", "Fishing mode: " .. mode, 3)
end)

AutoFishSection:NewTextBox("Auto Fish - Complete Delay", "Delay for completing fish (seconds)", function(value)
    CompleteDelay = tonumber(value) or 0.685
end)

AutoFishSection:NewTextBox("Auto Fish - Cancel Delay", "Delay for canceling fish (seconds)", function(value)
    CancelDelay = tonumber(value) or 1.04
end)

AutoFishSection:NewToggle("Random Throwing For Fishing", "Enable random throwing for fishing", function(state)
    _G.RandomThrowing = state
end)

AutoFishSection:NewToggle("Disable Fishing Animation", "Disable your fishing animation", function(state)
    _G.DisableFishingAnimation = state
    if state and LocalPlayer.Character then
        local humanoid = LocalPlayer.Character:FindFirstChild("Humanoid")
        if humanoid then
            for _, track in pairs(humanoid:GetPlayingAnimationTracks()) do
                if track.Name:lower():find("fish") then
                    track:Stop()
                end
            end
        end
    end
end)

AutoFishSection:NewDropdown("Skip Fish Rarity (Instant)", "Skip fish by rarity", {"Tidak ada", "Common", "Uncommon", "Rare", "Epic", "Legendary"}, function(rarity)
    _G.SkipRarity = rarity
end)

AutoFishSection:NewToggle("Enable Auto Fishing", "Enable auto fishing", function(state)
    AutoFishEnabled = state
    if state then
        Library:Notify("Auto Fish", "Auto fishing enabled!", 3)
    else
        Library:Notify("Auto Fish", "Auto fishing disabled!", 3)
    end
end)

AutoFishSection:NewButton("Cancel Fishing / Recovery Fishing", "Cancel your fishing if stuck. Now - one time.", function()
    if FishingRod then
        FishingRod:Deactivate()
    end
    Library:Notify("Fishing", "Fishing cancelled!", 2)
end)

-- Auto Fix Stuck Section
local AutoFixSection = AutoFishTab:NewSection("Auto Fix Stuck")

AutoFixSection:NewTextBox("Max Idle Time", "Max idle time before respawn (seconds)", function(value)
    MaxIdleTime = tonumber(value) or 15
end)

AutoFixSection:NewToggle("Enable Auto Respawn When Idle", "Auto Respawn when fishing stuck", function(state)
    AutoRespawnEnabled = state
end)

--------------------------------------------------
-- ========== EVENT SECTION ==========
--------------------------------------------------
local EventSection = AutoFishTab:NewSection("Perburuan Auto Event")

local events = {"Berburu Hiu", "Perburuan Hantu Hiu", "Perburuan Lalat", "Disco Event (Classic)"}

EventSection:NewDropdown("Select Event", "Select event to auto hunt", events, function(selected)
    _G.SelectedEvent = selected
    if selected == "Disco Event (Classic)" then
        Library:Notify("Disco Event", "Disco Event runs every 2 hours at Iron Cafe!", 5)
    end
end)

EventSection:NewToggle("Perburuan Enable Auto Event", "Enable Auto Event Hunt - Need Auto Fish Enabled", function(state)
    AutoEventEnabled = state
end)

EventSection:NewLabel("Group Event Status")
EventSection:NewLabel("Enable first")

EventSection:NewToggle("Enable Group Event (Lochness)", "Enable Group Event - Open gate first", function(state)
    _G.GroupEventEnabled = state
end)

EventSection:NewLabel("Disco Event Status")
EventSection:NewLabel("Every 2 hours at Iron Cafe")

EventSection:NewButton("Teleport to Iron Cafe (Disco)", "TP to Iron Cafe for Disco Event", function()
    if islandPositions["Iron Cafe (NEW)"] then
        HumanoidRootPart.CFrame = islandPositions["Iron Cafe (NEW)"]
        Library:Notify("Teleported", "Teleported to Iron Cafe for Disco Event!", 3)
    end
end)

--------------------------------------------------
-- ========== AUTOMATION TAB ==========
--------------------------------------------------
local AutomationTab    = Window:NewTab("Automation")
local AutoFarmSection  = AutomationTab:NewSection("Automation Farming")

AutoFarmSection:NewButton("Auto Farm Classic Island", "Auto farm at Classic Island", function()
    Library:Notify("Auto Farm", "Classic Island farming started!", 3)
    _G.AutoFarmClassic = true
end)

AutoFarmSection:NewButton("Auto Farm Iron Cavern", "Auto farm at Iron Cavern (Level 200+)", function()
    if LocalPlayer.leaderstats and LocalPlayer.leaderstats.Level.Value >= 200 then
        Library:Notify("Auto Farm", "Iron Cavern farming started!", 3)
        _G.AutoFarmIronCavern = true
    else
        Library:Notify("Error", "You need Level 200+ to access Iron Cavern!", 5)
    end
end)

AutomationTab:NewSection("Automation Sell")
AutomationTab:NewSection("Automation Sell Enchant Stone")
AutomationTab:NewSection("Automation Weather")
AutomationTab:NewSection("Automation Totems")
AutomationTab:NewSection("Automation Favorite")
AutomationTab:NewSection("Automation UnFavorite")

--------------------------------------------------
-- ========== QUEST TAB ==========
--------------------------------------------------
local QuestTab     = Window:NewTab("Quest")
local QuestSection = QuestTab:NewSection("Automation Quest")

QuestSection:NewButton("Automation Quest - Layer Task", "Auto complete layer tasks", function()
    Library:Notify("Quest", "Layer task automation started", 3)
end)

QuestSection:NewButton("Automation Quest - Ruin Task", "Auto complete ruin tasks", function()
    Library:Notify("Quest", "Ruin task automation started", 3)
end)

QuestSection:NewButton("Automation Quest - Iron Cavern", "Auto complete Iron Cavern quests", function()
    Library:Notify("Quest", "Iron Cavern automation started", 3)
end)

QuestSection:NewButton("Batang Automation Quest - Ghostfinn", "Auto complete Ghostfinn quests", function()
    Library:Notify("Quest", "Ghostfinn automation started", 3)
end)

QuestSection:NewButton("Batang Automation Quest - Element", "Auto complete Element quests", function()
    Library:Notify("Quest", "Element automation started", 3)
end)

QuestSection:NewButton("Classic Event Quests", "Complete Classic Island daily quests (3000 Tix/day)", function()
    Library:Notify("Quest", "Classic Event quests started!", 3)
end)

--------------------------------------------------
-- ========== SHOP TAB ==========
--------------------------------------------------
local ShopTab      = Window:NewTab("Shop")
local ShopSection  = ShopTab:NewSection("Shop")

ShopSection:NewButton("Beli Batang", "Buy fishing rods", function()
    Library:Notify("Shop", "Opening rod shop...", 3)
end)

ShopSection:NewButton("Beli Bobbers", "Buy bobbers", function()
    Library:Notify("Shop", "Opening bobber shop...", 3)
end)

ShopSection:NewButton("Beli From Traveling Merchant", "Buy from traveling merchant", function()
    Library:Notify("Shop", "Opening merchant shop...", 3)
end)

ShopSection:NewButton("Classic Event Shop", "Access Classic Island Battle Pass & Shop", function()
    HumanoidRootPart.CFrame = islandPositions["Classic Island (NEW)"]
    Library:Notify("Shop", "Teleported to Classic Island Shop!", 3)
end)

--------------------------------------------------
-- ========== PREMIUM TAB ==========
--------------------------------------------------
local PremiumTab      = Window:NewTab("Premium")
local PremiumSection  = PremiumTab:NewSection("Premium Features")

PremiumSection:NewLabel("Premium features are locked")
PremiumSection:NewLabel("Contact developer for access")

--------------------------------------------------
-- ========== SETTINGS TAB ==========
--------------------------------------------------
local SettingsTab      = Window:NewTab("Pengaturan")
local WebhookSection   = SettingsTab:NewSection("Webhook")

WebhookSection:NewTextBox("Webhook URL", "Discord webhook URL", function(value)
    _G.WebhookURL = value
end)

WebhookSection:NewTextBox("Current Discord ID", "Your Discord ID", function(value)
    _G.DiscordID = value
end)

WebhookSection:NewButton("Test Webhook", "Test webhook connection, send message to your webhook", function()
    Library:Notify("Webhook", "Testing webhook...", 3)
end)

-- Performance Settings
local PerformanceSection = SettingsTab:NewSection("Performance Settings")

PerformanceSection:NewButton("Boost FPS", "Boost FPS / Anti Lag", function()
    local decalsyeeted = true
    local g = game
    local w = g.Workspace
    local l = g.Lighting
    local t = w.Terrain

    if decalsyeeted then
        for _, v in pairs(w:GetDescendants()) do
            if v:IsA("Decal") or v:IsA("Texture") then
                v.Transparency = 1
            end
        end
    end

    t.WaterWaveSize       = 0
    t.WaterWaveSpeed      = 0
    t.WaterReflectance    = 0
    t.WaterTransparency   = 0
    l.GlobalShadows       = false
    l.FogEnd              = 9e9
    settings().Rendering.QualityLevel = 1

    Library:Notify("Performance", "FPS Boosted!", 3)
end)

PerformanceSection:NewToggle("Disable Skin Effect", "Remove all effects from Rod Skin", function(state)
    _G.DisableSkinEffect = state
    if state then
        for _, v in pairs(workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter") or v:IsA("Trail") then
                v.Enabled = false
            end
        end
    end
end)

PerformanceSection:NewToggle("Disable 3D Rendering", "Disable 3D Rendering", function(state)
    if state then
        RunService:Set3dRenderingEnabled(false)
    else
        RunService:Set3dRenderingEnabled(true)
    end
end)

-- UI Controls (Minimize / Toggle)
local UIControlSection = SettingsTab:NewSection("UI Controls")

UIControlSection:NewKeybind("Toggle UI (Minimize)", "Hide/Show entire GUI", Enum.KeyCode.RightControl, function()
    if Library and Library.ToggleUI then
        Library:ToggleUI()
    else
        local gui = CoreGui:FindFirstChild("KavoUI") or CoreGui:FindFirstChild("KavoUI v2")
        if gui then
            gui.Enabled = not gui.Enabled
        end
    end
end)

UIControlSection:NewButton("Minimize / Hide UI", "Toggle UI visibility", function()
    if Library and Library.ToggleUI then
        Library:ToggleUI()
    else
        local gui = CoreGui:FindFirstChild("KavoUI") or CoreGui:FindFirstChild("KavoUI v2")
        if gui then
            gui.Enabled = not gui.Enabled
        end
    end
end)

-- Config System
local ConfigSection = SettingsTab:NewSection("Config System")

ConfigSection:NewButton("Save Config", "Save current configuration", function()
    Library:Notify("Config", "Config saved!", 3)
end)

ConfigSection:NewButton("Load Config", "Load saved configuration", function()
    Library:Notify("Config", "Config loaded!", 3)
end)

-- Information Section
local InfoSection = SettingsTab:NewSection("Update Information")
InfoSection:NewLabel("FFS Hub v2.3.6 - November 2025")
InfoSection:NewLabel("New: Classic Island, Iron Cavern, Iron Cafe")
InfoSection:NewLabel("New: Disco Event (Every 2 hours)")
InfoSection:NewLabel("New: 42 Classic Fish + 2 Secrets")
InfoSection:NewLabel("Requirement: Level 200+ for Iron Cavern")

--------------------------------------------------
-- ========== AUTO FISHING LOGIC ==========
--------------------------------------------------
local function getFishingRod()
    if LocalPlayer.Character then
        for _, tool in pairs(LocalPlayer.Character:GetChildren()) do
            if tool:IsA("Tool") and (tool.Name:lower():find("rod") or tool.Name:lower():find("fishing")) then
                return tool
            end
        end
        for _, tool in pairs(LocalPlayer.Backpack:GetChildren()) do
            if tool:IsA("Tool") and (tool.Name:lower():find("rod") or tool.Name:lower():find("fishing")) then
                return tool
            end
        end
    end
    return nil
end

local function equipRod()
    local rod = getFishingRod()
    if rod and rod.Parent == LocalPlayer.Backpack then
        Humanoid:EquipTool(rod)
        task.wait(0.5)
        return true
    end
    return false
end

local function castFishing()
    local rod = getFishingRod()
    if rod then
        rod:Activate()
        return true
    end
    return false
end

local function reelFishing()
    task.wait(CompleteDelay)
    local rod = getFishingRod()
    if rod then
        rod:Activate()
        task.wait(CancelDelay)
    end
end

-- Auto Fishing Loop
RunService.Heartbeat:Connect(function()
    if AutoFishEnabled then
        pcall(function()
            if not getFishingRod() or getFishingRod().Parent == LocalPlayer.Backpack then
                equipRod()
            end

            if selectedMode == "Blatant New" then
                castFishing()
                task.wait(0.1)
                reelFishing()
            elseif selectedMode == "Legit" then
                castFishing()
                task.wait(math.random(2, 4))
                reelFishing()
            elseif selectedMode == "Fast" then
                castFishing()
                reelFishing()
            end
        end)
    end
end)

-- Auto Fix Stuck Loop
RunService.Heartbeat:Connect(function(deltaTime)
    if AutoRespawnEnabled and AutoFishEnabled then
        pcall(function()
            local currentPos = HumanoidRootPart.Position
            if (currentPos - LastPosition).Magnitude < 1 then
                IdleTime = IdleTime + deltaTime
                if IdleTime >= MaxIdleTime then
                    LocalPlayer.Character:BreakJoints()
                    IdleTime = 0
                    Library:Notify("Auto Respawn", "Respawned due to idle!", 3)
                end
            else
                IdleTime  = 0
                LastPosition = currentPos
            end
        end)
    end
end)

-- Character Reload Handler
LocalPlayer.CharacterAdded:Connect(function(char)
    Character        = char
    Humanoid         = char:WaitForChild("Humanoid")
    HumanoidRootPart = char:WaitForChild("HumanoidRootPart")
    LastPosition     = HumanoidRootPart.Position
    IdleTime         = 0
end)

Library:Notify("FFS Hub", "Script loaded successfully! November 2025 Update", 5)
Library:Notify("Update", "New: Classic Island, Iron Cavern, Iron Cafe!", 5)
